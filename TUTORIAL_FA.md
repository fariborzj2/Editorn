# مستندات توسعه Editron (فاز ۱ و ۲: هسته، بلاک‌ها و پلاگین‌ها)

این مستندات مراحل توسعه ویرایشگر متن **Editron** را از صفر تا صد شرح می‌دهد.

---

## ۱. مقدمه (Introduction)

در دنیای وب مدرن، ویرایشگرهای `contenteditable` ساده دیگر پاسخگو نیستند. ما نیاز به ساختاری داریم که:
1. خروجی JSON تمیز بدهد (نه HTML کثیف).
2. قابل توسعه باشد (پلاگین‌سیستم).
3. پرفورمنس بالایی داشته باشد.

در این فاز، ما **Core Engine**، سیستم **بلاک‌ها** و **Slash Menu** را پیاده‌سازی کردیم.

---

## ۲. ساختار پروژه (Project Structure)

ما از `Vite` و `TypeScript` برای شروع استفاده کردیم تا محیط توسعه سریع و تایپ‌سیف داشته باشیم.

```bash
src/
├── blocks/          # محل قرارگیری بلاک‌ها
│   ├── Paragraph.ts # بلاک پاراگراف
│   └── Header.ts    # بلاک تیتر (جدید)
├── core/            # هسته اصلی ویرایشگر
│   ├── BlockManager.ts  # مدیریت بلاک‌ها (افزودن، حذف، جابجایی)
│   ├── Editron.ts       # کلاس اصلی و نقطه ورود
│   ├── PluginManager.ts # مدیریت پلاگین‌ها
│   └── Renderer.ts      # موتور رندرینگ
├── plugins/         # پلاگین‌های UI
│   └── SlashMenu.ts # منوی دستورات (جدید)
└── index.ts         # نقطه ورود دمو
```

---

## ۳. قابلیت‌های اضافه شده در فاز ۲

### ۳.۱. بلاک تیتر (Header Block)
اکنون پشتیبانی از تگ‌های H1 تا H6 اضافه شده است. کاربر می‌تواند از طریق منوی دستورات، نوع بلاک را تغییر دهد.

```typescript
// Header Block Structure
{
  type: 'header',
  content: {
    text: 'Hello World',
    level: 2
  }
}
```

### ۳.۲. منوی دستورات (Slash Menu Plugin)
یک پلاگین هوشمند که با تایپ کردن کاراکتر `/` در ابتدای خط فعال می‌شود. این منو به کاربر اجازه می‌دهد تا به سرعت نوع بلاک را عوض کند (مثلاً پاراگراف را به تیتر تبدیل کند).

این قابلیت با استفاده از سیستم پلاگین `PluginManager` پیاده‌سازی شده است که نشان‌دهنده قدرت توسعه‌پذیری Editron است.

### ۳.۳. قابلیت تبدیل بلاک‌ها (Block Replacement)
در هسته (`BlockManager`)، قابلیت جایگزینی یک بلاک با بلاک دیگر (`replaceBlock`) اضافه شد. این متد بلاک فعلی را با حفظ ID (یا ساخت ID جدید) با یک بلاک از نوع دیگر جایگزین می‌کند.

---

## ۴. نحوه استفاده (Usage)

برای استفاده از این ادیتور در پروژه:

1. یک عنصر در HTML با یک ID بسازید.
2. ادیتور را فراخوانی و پلاگین‌ها را ثبت کنید:

```typescript
const editor = new Editron({
  holder: 'editorjs',
  data: []
});

// ثبت پلاگین‌ها
editor.pluginManager.register(new SlashMenu());

editor.init();
```

---

## ۵. قدم‌های بعدی (Next Steps)

در فازهای بعدی:
- **Floating Toolbar:** تولباری که روی متن انتخاب شده ظاهر شود (Bold, Italic).
- **List Block:** لیست‌های مرتب و نامرتب.
- **Image Block:** آپلود و نمایش تصویر.
- **AI Integration:** اتصال به هوش مصنوعی برای تولید متن.

این پروژه با رعایت اصول **Clean Architecture** و **Solid Principles** پایه‌ریزی شده است.
